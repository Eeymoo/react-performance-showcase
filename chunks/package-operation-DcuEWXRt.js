import{y as n,B as e}from"./vendor-react-CTURZAkq.js";import{B as y,D as S,a as I,b as W,S as j}from"./vendor-antd-DJ0BsdNJ.js";import"./vendor-react-dom-CVPC-BA4.js";import"./@vendor-emotion-h398TVVv.js";import"./vendor-antd-icons-BMchXmwU.js";const $=o=>e.jsx(e.Fragment,{children:o.map(l=>e.jsx(y,{type:"link",icon:l.icon,disabled:l.disabled,onClick:l.onClick,children:l.label},`Operation-${l.key}`))}),N=o=>e.jsx(e.Fragment,{children:e.jsx(S,{menu:{items:o},children:e.jsx(y,{type:"link",children:"更多"})})}),w=({maxLength:o=1/0,items:l=[],overflow:a=!1,overflowRender:C=N,render:d=$})=>{const[k,v]=n.useState(o),[x,u]=n.useState([]),r=n.useRef(null),i=n.useRef(null),[b,t]=n.useState([]);n.useEffect(()=>{const s=k>o?o:k;if(l.length>s){const c=l.slice(0,s),p=l.slice(s);console.log(`Items: ${l.length}, Render Items: ${c.length}, Overflow Items: ${p.length}`),u(c),t(p)}else u(l),t([])},[l,o,k]);const f=(s,c)=>{const p=s.clientWidth,m=Array.from(c.childNodes).map(h=>h instanceof HTMLElement?h.offsetWidth:0),g=m.pop()||0;console.log(`Container Width: ${p}, Item Widths: ${m}, More Width: ${g}`);let R=0,O=0;for(let h=0;h<m.length&&(R+=m[h],!(R+g>p));h++)O++;return O};return n.useEffect(()=>{if(!a)return;const s=new ResizeObserver(()=>{if(r.current&&i.current){const c=f(i.current,r.current);console.log(`Resize - Visible Count: ${c}`),v(c)}});return r.current&&i.current&&s.observe(i.current),()=>{s.disconnect()}},[l,r,i,a]),e.jsxs("div",{className:"operation-container",ref:i,children:[e.jsxs("div",{className:"operation-content",ref:r,style:{position:"relative",top:999999,left:999999,width:1,height:1,overflow:"hidden"},children:[d(l),e.jsx("span",{className:"operation-item operation-item-move",children:C([])})]}),e.jsxs("div",{className:"operation-content",children:[d(x),e.jsx("span",{className:"operation-item operation-item-move",style:{display:b.length>0?"inline-block":"none"},children:C(b)})]})]})};function M(){const[o,l]=n.useState(100),[a,C]=n.useState(!1),[d,k]=n.useState(!1),[v,x]=n.useState(!1),[u,r]=n.useState(void 0),[i,b]=n.useState(void 0);return n.useEffect(()=>{r(d?()=>t=>e.jsx(e.Fragment,{children:t.map(f=>e.jsx(y,{type:"link",disabled:f.disabled,onClick:f.onClick,children:f.label},`Operation-${f.key}`))}):void 0),b(v?()=>t=>e.jsx(S,{menu:{items:t},children:e.jsx(y,{type:"link",children:"More"})}):void 0)},[d,v]),e.jsxs("div",{children:[e.jsxs(I,{direction:"vertical",style:{width:"100%"},children:["Width 容器宽度:",e.jsx(W,{defaultValue:100,onChange:t=>l(t)}),"Overflow 自动收缩:",e.jsx(j,{options:[{label:"true",value:!0},{label:"false",value:!1}],value:a,onChange:t=>C(t)}),"Overflow 自定义Item渲染:",e.jsx(j,{options:[{label:"true",value:!0},{label:"false",value:!1}],value:d,onChange:t=>k(t)}),"Overflow 自定义更多渲染:",e.jsx(j,{options:[{label:"true",value:!0},{label:"false",value:!1}],value:v,onChange:t=>x(t)})]}),e.jsxs(I,{direction:"vertical",style:{width:`${o}%`},className:"bg-stone-100",size:24,children:[e.jsx(w,{render:u,overflowRender:i,overflow:a,items:[{label:"新增",key:"add",icon:"➕",onClick:()=>alert("新增操作")},{label:"编辑",key:"edit",icon:"✏️",onClick:()=>alert("编辑操作")},{label:"删除",key:"delete",icon:"🗑️",onClick:()=>alert("删除操作")},{label:"查看",key:"view",icon:"👁️",onClick:()=>alert("查看操作")},{label:"下载",key:"download",icon:"⬇️",onClick:()=>alert("下载操作")},{label:"分享",key:"share",icon:"🔗",onClick:()=>alert("分享操作")}]}),e.jsx(w,{render:u,overflowRender:i,overflow:a,items:[{label:"新增",key:"add",icon:"➕",onClick:()=>alert("新增操作")},{label:"编辑",key:"edit",icon:"✏️",onClick:()=>alert("编辑操作")},{label:"删除",key:"delete",icon:"🗑️",onClick:()=>alert("删除操作")},{label:"查看",key:"view",icon:"👁️",onClick:()=>alert("查看操作")},{label:"下载",key:"download",icon:"⬇️",onClick:()=>alert("下载操作")},{label:"分享",key:"share",icon:"🔗",onClick:()=>alert("分享操作")}],maxLength:3}),e.jsx(w,{render:u,overflowRender:i,overflow:a,items:[{label:"新增",key:"add",icon:"➕",onClick:()=>alert("新增操作")},{label:"编辑",key:"edit",icon:"✏️",onClick:()=>alert("编辑操作")},{label:"删除",key:"delete",icon:"🗑️",onClick:()=>alert("删除操作")},{label:"查看",key:"view",icon:"👁️",onClick:()=>alert("查看操作")},{label:"下载",key:"download",icon:"⬇️",onClick:()=>alert("下载操作")},{label:"分享",key:"share",icon:"🔗",onClick:()=>alert("分享操作")}],maxLength:3})]})]})}export{M as default};
